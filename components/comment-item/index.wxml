<!-- components/comment-item/index.wxml -->
<view class="comment-wrapper">
  <!-- ä¸»è¯„è®º -->
  <view class="comment-main">
    <image class="user-avatar" src="{{comment.userAvatar}}" mode="aspectFill"></image>
    
    <view class="comment-content">
      <view class="comment-header">
        <text class="user-name">{{comment.userName}}</text>
        <text class="comment-time">{{comment.createTime}}</text>
      </view>
      
      <view class="comment-text">{{comment.content}}</view>
      
      <view class="comment-footer">
        <view class="comment-action" bindtap="onLike">
          <text class="action-icon {{isLiked ? 'liked' : ''}}">ğŸ‘</text>
          <text class="like-count">{{likeCount}}</text>
        </view>
        
        <view class="comment-action" bindtap="onReply">
          <text class="action-icon">â†©ï¸</text>
          <text class="action-text">å›å¤</text>
        </view>
      </view>
    </view>
  </view>
  
  <!-- å›å¤åˆ—è¡¨ -->
  <view class="replies-list" wx:if="{{comment.replies && comment.replies.length > 0}}">
    <view class="reply-item" wx:for="{{comment.replies}}" wx:key="id">
      <image class="reply-avatar" src="{{item.userAvatar}}" mode="aspectFill"></image>
      
      <view class="reply-content">
        <view class="reply-header">
          <text class="reply-user">{{item.userName}}</text>
          <text class="reply-time">{{item.createTime}}</text>
        </view>
        
        <view class="reply-text">
          <text wx:if="{{item.targetUserName}}" class="reply-target">å›å¤ {{item.targetUserName}}ï¼š</text>
          {{item.content}}
        </view>
        
        <view class="reply-footer">
          <view class="reply-action" data-index="{{index}}" bindtap="onReplyToReply">
            <text class="action-icon">â†©ï¸</text>
            <text class="action-text">å›å¤</text>
          </view>
        </view>
      </view>
    </view>
  </view>
  
  <!-- å±•å¼€æ›´å¤šå›å¤ -->
  <view class="show-more-replies" wx:if="{{comment.replies && comment.replies.length > 3 && !showAllReplies}}" bindtap="toggleReplies">
    <text class="show-more-text">å±•å¼€{{comment.replies.length - 3}}æ¡å›å¤</text>
    <text class="show-more-icon">â–¼</text>
  </view>
  
  <!-- æ”¶èµ·å›å¤ -->
  <view class="show-more-replies" wx:if="{{comment.replies && comment.replies.length > 3 && showAllReplies}}" bindtap="toggleReplies">
    <text class="show-more-text">æ”¶èµ·å›å¤</text>
    <text class="show-more-icon">â–²</text>
  </view>
</view>